<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Kaufhistorie - OneDrop</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" />
  <link rel="stylesheet" href="styles.css" />
  <style>
    .purchase-history-container {
      max-width: 1000px;
      margin: 2rem auto;
      padding: 0 1rem;
    }
    
    .purchase-card {
      background: var(--glass-bg);
      border-radius: 15px;
      padding: 1.5rem;
      margin-bottom: 1rem;
      border: 1px solid var(--glass-border);
    }
    
    .purchase-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
    }
    
    .purchase-status {
      padding: 0.5rem 1rem;
      border-radius: 20px;
      font-weight: bold;
    }
    
    .status-completed { background: #40c057; color: white; }
    .status-pending { background: #ffaa00; color: black; }
    .status-cancelled { background: #ff6b6b; color: white; }
    
    .purchase-details {
      display: grid;
      grid-template-columns: 100px 1fr auto;
      gap: 1rem;
      align-items: center;
    }
    
    .purchase-image {
      width: 100px;
      height: 80px;
      object-fit: cover;
      border-radius: 10px;
    }
    
    .purchase-info h4 {
      margin-bottom: 0.5rem;
    }
    
    .purchase-price {
      font-size: 1.2rem;
      font-weight: bold;
      color: var(--main);
    }

    /* Header Anpassungen */
    header {
      justify-content: center !important;
    }
  </style>
</head>
<body>
  <!-- Sidebar Overlay -->
  <div class="sidebar-overlay" id="sidebarOverlay"></div>

  <!-- Sidebar Toggle Button -->
  <button class="sidebar-toggle" id="sidebarToggle">
    <i class="fas fa-bars"></i>
  </button>

  <!-- Sidebar -->
  <div class="sidebar" id="sidebar">
    <ul class="sidebar-menu">
      <li><a href="index.html"><i class="fas fa-home"></i> Startseite</a></li>
      <li><a href="live-auctions.html"><i class="fas fa-gavel"></i> Live-Auktionen</a></li>
      <li><a href="tracking.html"><i class="fas fa-truck"></i> Sendungsverfolgung</a></li>
      <li><a href="purchase-history.html" class="active"><i class="fas fa-history"></i> Kaufhistorie</a></li>
      <li><a href="changelog.html"><i class="fas fa-code-branch"></i> Changelog</a></li>
      <li><a href="#"><i class="fas fa-user"></i> Profil</a></li>
      <li><a href="#"><i class="fas fa-cog"></i> Einstellungen</a></li>
      <li><a href="#"><i class="fas fa-question-circle"></i> Hilfe</a></li>
    </ul>
    
    <!-- Verkäufer-Bereich -->
    <div class="sidebar-section">
      <h4>Verkäuferbereich</h4>
      <ul class="sidebar-menu">
        <li><a href="seller-dashboard.html"><i class="fas fa-chart-line"></i> Dashboard</a></li>
        <li><a href="my-products.html"><i class="fas fa-box"></i> Meine Produkte</a></li>
        <li><a href="sales-analytics.html"><i class="fas fa-analytics"></i> Verkaufsstatistik</a></li>
      </ul>
    </div>
  </div>

  <header id="mainHeader">
    <div class="logo"><i class="fas fa-gem"></i></div>
    <div>OneDrop Kaufhistorie</div>
  </header>

  <div class="purchase-history-container">
    <h2 style="text-align: center; margin-bottom: 2rem; color: var(--main);">
      <i class="fas fa-history"></i> Deine Kaufhistorie
    </h2>
    
    <div id="purchaseHistory">
      <!-- Beispiel-Käufe -->
      <div class="purchase-card">
        <div class="purchase-header">
          <div>
            <h3>Bestellung #OD-2025-001</h3>
            <p>Datum: 15. März 2025</p>
          </div>
          <span class="purchase-status status-completed">Abgeschlossen</span>
        </div>
        
        <div class="purchase-details">
          <img src="https://placehold.co/100x80/00ffcc/000000?text=Smartwatch" alt="Premium Smartwatch" class="purchase-image">
          <div class="purchase-info">
            <h4>Premium Smartwatch</h4>
            <p>Menge: 1 × €199.99</p>
            <p><i class="fas fa-truck"></i> Geliefert am 18. März 2025</p>
          </div>
          <div class="purchase-price">€199.99</div>
        </div>
      </div>

      <div class="purchase-card">
        <div class="purchase-header">
          <div>
            <h3>Bestellung #OD-2025-002</h3>
            <p>Datum: 10. März 2025</p>
          </div>
          <span class="purchase-status status-completed">Abgeschlossen</span>
        </div>
        
        <div class="purchase-details">
          <img src="https://placehold.co/100x80/4dabf7/000000?text=Jeans" alt="Designer Jeans" class="purchase-image">
          <div class="purchase-info">
            <h4>Designer Jeans</h4>
            <p>Menge: 2 × €89.99</p>
            <p><i class="fas fa-truck"></i> Geliefert am 13. März 2025</p>
          </div>
          <div class="purchase-price">€179.98</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Mobile Navigation -->
  <div class="mobile-actions">
    <button class="mobile-action-btn" id="mobileHomeBtn">
      <i class="fas fa-home"></i>
      <span>Start</span>
    </button>
    <button class="mobile-action-btn" id="mobileAuctionsBtn">
      <i class="fas fa-gavel"></i>
      <span>Auktionen</span>
    </button>
    <button class="mobile-action-btn" id="mobileTrackingBtn">
      <i class="fas fa-truck"></i>
      <span>Tracking</span>
    </button>
    <button class="mobile-action-btn active" id="mobileHistoryBtn">
      <i class="fas fa-history"></i>
      <span>Historie</span>
    </button>
  </div>

  <script>
    // Sidebar Funktionalität für alle Seiten
    const sidebarToggle = document.getElementById('sidebarToggle');
    const sidebar = document.getElementById('sidebar');
    const sidebarOverlay = document.getElementById('sidebarOverlay');

    sidebarToggle.addEventListener('click', () => {
      sidebar.classList.toggle('open');
      sidebarOverlay.classList.toggle('active');
    });

    sidebarOverlay.addEventListener('click', () => {
      sidebar.classList.remove('open');
      sidebarOverlay.classList.remove('active');
    });

    // Mobile Navigation
    document.getElementById('mobileHomeBtn').addEventListener('click', () => {
      window.location.href = 'index.html';
    });

    document.getElementById('mobileAuctionsBtn').addEventListener('click', () => {
      window.location.href = 'live-auctions.html';
    });

    document.getElementById('mobileTrackingBtn').addEventListener('click', () => {
      window.location.href = 'tracking.html';
    });

    // Lade Kaufhistorie aus localStorage
    function loadPurchaseHistory() {
      const purchases = JSON.parse(localStorage.getItem('purchases')) || [];
      const container = document.getElementById('purchaseHistory');
      
      if (purchases.length === 0) {
        container.innerHTML = `
          <div style="text-align: center; padding: 3rem; color: var(--text-secondary);">
            <i class="fas fa-shopping-bag" style="font-size: 3rem; margin-bottom: 1rem;"></i>
            <h3>Noch keine Käufe</h3>
            <p>Deine gekauften Produkte werden hier angezeigt.</p>
          </div>
        `;
        return;
      }
      
      // Sortiere Käufe nach Datum (neueste zuerst)
      purchases.sort((a, b) => new Date(b.date) - new Date(a.date));
      
      container.innerHTML = purchases.map(purchase => `
        <div class="purchase-card">
          <div class="purchase-header">
            <div>
              <h3>Bestellung #${purchase.id}</h3>
              <p>Datum: ${new Date(purchase.date).toLocaleDateString('de-DE')}</p>
            </div>
            <span class="purchase-status status-${purchase.status}">${getStatusText(purchase.status)}</span>
          </div>
          
          <div class="purchase-details">
            <img src="${purchase.image}" alt="${purchase.title}" class="purchase-image">
            <div class="purchase-info">
              <h4>${purchase.title}</h4>
              <p>Menge: ${purchase.quantity} × €${purchase.price.toFixed(2)}</p>
              ${purchase.deliveryDate ? `<p><i class="fas fa-truck"></i> Geliefert am ${new Date(purchase.deliveryDate).toLocaleDateString('de-DE')}</p>` : ''}
            </div>
            <div class="purchase-price">€${(purchase.quantity * purchase.price).toFixed(2)}</div>
          </div>
        </div>
      `).join('');
    }
    
    function getStatusText(status) {
      const statusMap = {
        'completed': 'Abgeschlossen',
        'pending': 'In Bearbeitung',
        'cancelled': 'Storniert'
      };
      return statusMap[status] || status;
    }

    // Initialisierung
    document.addEventListener('DOMContentLoaded', loadPurchaseHistory);
  </script>
</body>
</html>