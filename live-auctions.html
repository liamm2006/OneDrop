<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Live-Auktionen - OneDrop</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" />
  <link rel="stylesheet" href="styles.css" />
  <style>
    .live-auction-badge {
      background: linear-gradient(45deg, #ff6b6b, #ff8e8e);
      color: white;
      padding: 0.3rem 0.8rem;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: bold;
      animation: pulse-live 2s infinite;
    }
    
    @keyframes pulse-live {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.7; }
    }
    
    .bid-history {
      max-height: 200px;
      overflow-y: auto;
      background: rgba(0,0,0,0.3);
      border-radius: 10px;
      padding: 1rem;
      margin-top: 1rem;
    }
    
    .bid-item {
      display: flex;
      justify-content: space-between;
      padding: 0.5rem 0;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }
    
    .countdown-live {
      font-size: 1.5rem;
      font-weight: bold;
      color: #ff6b6b;
      text-align: center;
      margin: 1rem 0;
    }
    
    .bid-form {
      display: flex;
      gap: 1rem;
      margin-top: 1rem;
    }
    
    .bid-input {
      flex: 1;
      padding: 0.8rem;
      border: 2px solid var(--main);
      border-radius: 10px;
      background: rgba(0,0,0,0.5);
      color: white;
      font-size: 1.1rem;
    }
    
    .place-bid-btn {
      background: linear-gradient(45deg, #ff6b6b, #ff5252);
      color: white;
      border: none;
      padding: 0 1.5rem;
      border-radius: 10px;
      cursor: pointer;
      font-weight: bold;
    }

    /* Header Anpassungen für Konsistenz */
    header {
      justify-content: center !important;
    }
  </style>
</head>
<body>
  <!-- Sidebar Overlay -->
  <div class="sidebar-overlay" id="sidebarOverlay"></div>

  <!-- Sidebar Toggle Button -->
  <button class="sidebar-toggle" id="sidebarToggle">
    <i class="fas fa-bars"></i>
  </button>

  <!-- Sidebar -->
  <div class="sidebar" id="sidebar">
    <ul class="sidebar-menu">
      <li><a href="index.html"><i class="fas fa-home"></i> Startseite</a></li>
      <li><a href="live-auctions.html" class="active"><i class="fas fa-gavel"></i> Live-Auktionen</a></li>
      <li><a href="tracking.html"><i class="fas fa-truck"></i> Sendungsverfolgung</a></li>
      <li><a href="purchase-history.html"><i class="fas fa-history"></i> Kaufhistorie</a></li>
      <li><a href="changelog.html"><i class="fas fa-code-branch"></i> Changelog</a></li>
      <li><a href="#"><i class="fas fa-user"></i> Profil</a></li>
      <li><a href="#"><i class="fas fa-cog"></i> Einstellungen</a></li>
      <li><a href="#"><i class="fas fa-question-circle"></i> Hilfe</a></li>
    </ul>
    
    <!-- Verkäufer-Bereich -->
    <div class="sidebar-section">
      <h4>Verkäuferbereich</h4>
      <ul class="sidebar-menu">
        <li><a href="seller-dashboard.html"><i class="fas fa-chart-line"></i> Dashboard</a></li>
        <li><a href="my-products.html"><i class="fas fa-box"></i> Meine Produkte</a></li>
        <li><a href="sales-analytics.html"><i class="fas fa-analytics"></i> Verkaufsstatistik</a></li>
      </ul>
    </div>
  </div>

  <header id="mainHeader">
    <div class="logo"><i class="fas fa-gem"></i></div>
    <div>OneDrop Live-Auktionen</div>
  </header>

  <div class="categories">
    <button class="category-btn active" data-category="all">
      <i class="fas fa-fire"></i> Alle Live-Auktionen
    </button>
    <button class="category-btn" data-category="ending-soon">
      <i class="fas fa-clock"></i> Endet bald
    </button>
    <button class="category-btn" data-category="high-bid">
      <i class="fas fa-crown"></i> Höchstgebote
    </button>
  </div>

  <div class="products" id="liveAuctionsContainer">
    <!-- Live-Auktionen werden per JavaScript geladen -->
  </div>

  <!-- Live Auktion Modal -->
  <div id="liveAuctionModal">
    <button class="close-modal">&times;</button>
    <div id="liveAuctionContent">
      <!-- Wird per JavaScript gefüllt -->
    </div>
  </div>

  <!-- Mobile Navigation -->
  <div class="mobile-actions">
    <button class="mobile-action-btn" id="mobileHomeBtn">
      <i class="fas fa-home"></i>
      <span>Start</span>
    </button>
    <button class="mobile-action-btn active" id="mobileAuctionsBtn">
      <i class="fas fa-gavel"></i>
      <span>Auktionen</span>
    </button>
    <button class="mobile-action-btn" id="mobileTrackingBtn">
      <i class="fas fa-truck"></i>
      <span>Tracking</span>
    </button>
    <button class="mobile-action-btn" id="mobileProfileBtn">
      <i class="fas fa-user"></i>
      <span>Profil</span>
    </button>
  </div>

  <script>
    // Sidebar Funktionalität für alle Seiten
    const sidebarToggle = document.getElementById('sidebarToggle');
    const sidebar = document.getElementById('sidebar');
    const sidebarOverlay = document.getElementById('sidebarOverlay');

    sidebarToggle.addEventListener('click', () => {
      sidebar.classList.toggle('open');
      sidebarOverlay.classList.toggle('active');
    });

    sidebarOverlay.addEventListener('click', () => {
      sidebar.classList.remove('open');
      sidebarOverlay.classList.remove('active');
    });

    // Mobile Navigation
    document.getElementById('mobileHomeBtn').addEventListener('click', () => {
      window.location.href = 'index.html';
    });

    document.getElementById('mobileTrackingBtn').addEventListener('click', () => {
      window.location.href = 'tracking.html';
    });

    document.getElementById('mobileProfileBtn').addEventListener('click', () => {
      // Profil-Funktionalität hier implementieren
      alert('Profil-Funktion wird geladen...');
    });

    // Live-Auktionen Daten
    const liveAuctions = [
      {
        id: "live-1",
        title: "Limited Edition Sneakers",
        currentBid: 120.00,
        minBid: 5.00,
        endTime: new Date(Date.now() + 2 * 60 * 60 * 1000), // 2 Stunden
        bidHistory: [
          { user: "SneakerFan23", amount: 120.00, time: new Date(Date.now() - 10 * 60 * 1000) },
          { user: "CollectorPro", amount: 115.00, time: new Date(Date.now() - 15 * 60 * 1000) },
          { user: "StyleHunter", amount: 110.00, time: new Date(Date.now() - 20 * 60 * 1000) }
        ],
        image: "https://placehold.co/400x300/00ffcc/000000?text=Limited+Sneakers",
        bidders: 8
      },
      {
        id: "live-2", 
        title: "Vintage Smartwatch",
        currentBid: 85.00,
        minBid: 3.00,
        endTime: new Date(Date.now() + 45 * 60 * 1000), // 45 Minuten
        bidHistory: [
          { user: "TechGuru", amount: 85.00, time: new Date(Date.now() - 5 * 60 * 1000) },
          { user: "GadgetLover", amount: 80.00, time: new Date(Date.now() - 8 * 60 * 1000) }
        ],
        image: "https://placehold.co/400x300/ff6b6b/000000?text=Vintage+Watch",
        bidders: 5
      }
    ];

    function renderLiveAuctions() {
      const container = document.getElementById('liveAuctionsContainer');
      container.innerHTML = '';

      liveAuctions.forEach(auction => {
        const timeLeft = auction.endTime - Date.now();
        const hours = Math.floor(timeLeft / (1000 * 60 * 60));
        const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));

        const card = document.createElement('div');
        card.className = 'product-card live-auction-card';
        card.innerHTML = `
          <span class="live-auction-badge">LIVE</span>
          <div class="product-images">
            <img src="${auction.image}" alt="${auction.title}">
          </div>
          <div class="product-title">${auction.title}</div>
          <div class="price-container">
            <i class="fas fa-gavel"></i>
            <div class="price">
              <span class="value">€${auction.currentBid.toFixed(2)}</span>
            </div>
          </div>
          <div class="countdown-live" id="countdown-${auction.id}">
            ${hours}h ${minutes}m
          </div>
          <div class="auction-info">
            <span><i class="fas fa-users"></i> ${auction.bidders} Bieter</span>
            <span><i class="fas fa-bolt"></i> Mindestgebot: €${auction.minBid.toFixed(2)}</span>
          </div>
          <button class="buy-btn join-auction-btn" data-id="${auction.id}">
            <i class="fas fa-gavel"></i> Jetzt bieten
          </button>
        `;

        card.querySelector('.join-auction-btn').addEventListener('click', () => {
          openLiveAuctionModal(auction);
        });

        container.appendChild(card);
      });

      startLiveCountdowns();
    }

    function openLiveAuctionModal(auction) {
      const modal = document.getElementById('liveAuctionModal');
      const content = document.getElementById('liveAuctionContent');
      
      const timeLeft = auction.endTime - Date.now();
      const hours = Math.floor(timeLeft / (1000 * 60 * 60));
      const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));

      content.innerHTML = `
        <h2>${auction.title}</h2>
        <img src="${auction.image}" style="width: 100%; border-radius: 10px; margin: 1rem 0;">
        
        <div class="live-auction-stats">
          <div class="stat">
            <div class="stat-label">Aktuelles Gebot</div>
            <div class="stat-value">€${auction.currentBid.toFixed(2)}</div>
          </div>
          <div class="stat">
            <div class="stat-label">Verbleibende Zeit</div>
            <div class="stat-value" id="modal-countdown">${hours}h ${minutes}m</div>
          </div>
          <div class="stat">
            <div class="stat-label">Bieter</div>
            <div class="stat-value">${auction.bidders}</div>
          </div>
        </div>

        <div class="bid-form">
          <input type="number" class="bid-input" id="bidAmount" 
                 min="${auction.currentBid + auction.minBid}" 
                 step="0.01" 
                 placeholder="Mindestens €${(auction.currentBid + auction.minBid).toFixed(2)}">
          <button class="place-bid-btn" onclick="placeBid('${auction.id}')">
            Gebot abgeben
          </button>
        </div>

        <div class="bid-history">
          <h4>Bietverlauf</h4>
          ${auction.bidHistory.map(bid => `
            <div class="bid-item">
              <span>${bid.user}</span>
              <span>€${bid.amount.toFixed(2)}</span>
              <span>${new Date(bid.time).toLocaleTimeString()}</span>
            </div>
          `).join('')}
        </div>
      `;

      modal.style.display = 'flex';
      document.body.style.overflow = 'hidden';

      // Close Modal Funktion
      document.querySelector('#liveAuctionModal .close-modal').addEventListener('click', () => {
        modal.style.display = 'none';
        document.body.style.overflow = '';
      });

      modal.addEventListener('click', (e) => {
        if (e.target === modal) {
          modal.style.display = 'none';
          document.body.style.overflow = '';
        }
      });
    }

    function placeBid(auctionId) {
      const bidAmount = parseFloat(document.getElementById('bidAmount').value);
      const auction = liveAuctions.find(a => a.id === auctionId);
      
      if (bidAmount >= auction.currentBid + auction.minBid) {
        auction.currentBid = bidAmount;
        auction.bidders++;
        auction.bidHistory.unshift({
          user: 'Du',
          amount: bidAmount,
          time: new Date()
        });
        
        alert('Gebot erfolgreich abgegeben!');
        renderLiveAuctions();
        
        // Modal schließen
        document.getElementById('liveAuctionModal').style.display = 'none';
        document.body.style.overflow = '';
      } else {
        alert(`Gebot muss mindestens €${(auction.currentBid + auction.minBid).toFixed(2)} betragen!`);
      }
    }

    function startLiveCountdowns() {
      setInterval(() => {
        liveAuctions.forEach(auction => {
          const timeLeft = auction.endTime - Date.now();
          if (timeLeft <= 0) return;
          
          const hours = Math.floor(timeLeft / (1000 * 60 * 60));
          const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
          
          const countdownEl = document.getElementById(`countdown-${auction.id}`);
          if (countdownEl) {
            countdownEl.textContent = `${hours}h ${minutes}m`;
            
            if (timeLeft < 30 * 60 * 1000) { // Letzte 30 Minuten
              countdownEl.style.color = '#ff6b6b';
              countdownEl.style.animation = 'pulse-live 1s infinite';
            }
          }
        });
      }, 1000);
    }

    // Kategorie-Filter
    document.querySelectorAll('.category-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
        this.classList.add('active');
        // Hier würde die Filterlogik implementiert werden
        renderLiveAuctions();
      });
    });

    // Initialisierung
    document.addEventListener('DOMContentLoaded', renderLiveAuctions);
  </script>
</body>
</html>